<p-table [value]="users" [loading]="loading" [paginator]="true" [rows]="10"
         styleClass="p-datatable-striped">
  <ng-template pTemplate="header">
    <tr>
      <th>Avatar</th>
      <th>Name</th>
      <th>Email</th>
      <th>Actions</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-user>
    <tr>
      <td>
        <p-avatar [label]="user.fullName?.charAt(0)" styleClass="mr-2" size="large"
                 [style]="{'background-color': '#2196F3', 'color': '#ffffff'}">
        </p-avatar>
      </td>
      <td>{{user.fullName}}</td>
      <td>{{user.email}}</td>
      <td>
        <button *ngIf="user.id !== currentUserId" 
                pButton type="button" [label]="getButtonLabel(user.id)"
                class="p-button-rounded" [class]="getButtonClass(user.id)"
                (click)="sendFriendRequest(user.id)"
                [disabled]="friendRequests.get(user.id) === 'pending' || friendRequests.get(user.id) === 'accepted'">
        </button>
        <button *ngIf="user.id === currentUserId"
                pButton
                type="button"
                label="You"
                icon="pi pi-user"
                class="p-button-rounded you-button"
                disabled>
        </button>
      </td>
    </tr>
  </ng-template>
  <ng-template pTemplate="emptymessage">
    <tr>
      <td colspan="4" class="text-center">No users found.</td>
    </tr>
  </ng-template>
</p-table>

