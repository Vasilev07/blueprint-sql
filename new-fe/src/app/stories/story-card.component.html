<div class="story-card" (click)="onStoryClick()">
  <!-- Story Thumbnail -->
  <div class="story-thumbnail">
    <img [src]="story?.thumbnailUrl" [alt]="story?.caption">
    
    <!-- Duration Badge -->
    <div class="duration-badge">
      {{ formatDuration(story?.duration || 0) }}
    </div>
    
    <!-- Time Remaining -->
    <div class="time-remaining">
      {{ getTimeRemaining(story?.expiresAt) }}
    </div>
    
    <!-- Play Button Overlay -->
    <div class="play-overlay">
      <i class="pi pi-play"></i>
    </div>
  </div>

  <!-- Story Info -->
  <div class="story-info">
    <div class="user-info">
      <p-avatar 
        [image]="story?.userAvatar" 
        [label]="story?.userName?.charAt(0)?.toUpperCase() || '?'"
        size="normal"
        shape="circle">
      </p-avatar>
      <div class="user-details">
        <span class="user-name">{{ story?.userName || 'Unknown User' }}</span>
        <span class="story-time">{{ formatTime(story?.createdAt || getCurrentDate()) }}</span>
      </div>
    </div>

    <div class="story-caption">
      {{ story?.caption || 'No caption' }}
    </div>

    <div class="story-stats">
      <div class="stat-item">
        <i class="pi pi-eye"></i>
        <span>{{ (story?.views || 0).toLocaleString() }}</span>
      </div>
      <div class="stat-item">
        <i class="pi pi-heart" [class.liked]="story?.isLiked"></i>
        <span>{{ (story?.likes || 0).toLocaleString() }}</span>
      </div>
      <div class="stat-item">
        <i class="pi pi-comments"></i>
        <span>{{ (story?.comments || 0).toLocaleString() }}</span>
      </div>
    </div>

    <!-- Story Tags -->
    <div class="story-tags">
      <span class="tag" *ngFor="let tag of story?.tags">
        #{{ tag }}
      </span>
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="story-actions" *ngIf="showActions">
    <button pButton 
      type="button"
      icon="pi pi-heart" 
      [class]="story?.isLiked ? 'p-button-danger p-button-outlined' : 'p-button-outlined'"
      [class.liked]="story?.isLiked"
      (click)="onLikeClick($event)"
      pTooltip="Like">
    </button>
    
    <button pButton 
      type="button"
      icon="pi pi-share-alt" 
      class="p-button-outlined"
      (click)="onShareClick($event)"
      pTooltip="Share">
    </button>
    
    <button pButton 
      type="button"
      icon="pi pi-ellipsis-v" 
      class="p-button-outlined"
      (click)="onMoreClick($event)"
      pTooltip="More Options">
    </button>
  </div>
</div> 