<div class="home-container">
  <!-- Header -->
  <div class="home-header">
    <div class="header-content">
      <h1 class="page-title">
        <i class="pi pi-users"></i>
        Discover People
      </h1>
      <p class="page-subtitle">
        Showing {{ totalUsers }} {{ currentFilter === 'all' ? 'users' : getFilterLabel().toLowerCase() }}
        <span *ngIf="onlineCount > 0" class="online-badge">
          <i class="pi pi-circle-fill"></i>
          {{ onlineCount }} online now
        </span>
      </p>
    </div>
    
    <button 
      pButton 
      type="button" 
      icon="pi pi-refresh" 
      class="p-button-text p-button-rounded"
      (click)="onRefresh()"
      pTooltip="Refresh">
    </button>
  </div>

  <!-- Filters and Sort -->
  <div class="home-controls">
    <!-- Filter Buttons -->
    <div class="filter-buttons">
      <button 
        *ngFor="let filter of filterOptions"
        pButton 
        type="button" 
        [label]="filter.label"
        [icon]="filter.icon"
        class="p-button-outlined filter-btn"
        [class.p-button-primary]="currentFilter === filter.value"
        (click)="onFilterChange(filter.value)">
      </button>
    </div>

    <!-- Sort Dropdown -->
    <div class="sort-control">
      <p-dropdown 
        [options]="sortOptions" 
        [(ngModel)]="currentSort"
        (onChange)="onSortChange($event)"
        optionLabel="label" 
        optionValue="value"
        [style]="{ minWidth: '200px' }"
        placeholder="Sort by">
        <ng-template pTemplate="selectedItem" let-option>
          <div class="flex align-items-center gap-2">
            <i class="pi pi-sort-alt"></i>
            <span>{{ option.label }}</span>
          </div>
        </ng-template>
        <ng-template pTemplate="item" let-option>
          <div class="flex align-items-center gap-2">
            <span>{{ option.label }}</span>
          </div>
        </ng-template>
      </p-dropdown>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <p-progressSpinner styleClass="w-4rem h-4rem"></p-progressSpinner>
    <p>Loading users...</p>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && users.length === 0" class="empty-state">
    <i class="pi pi-users empty-icon"></i>
    <h3>No Users Found</h3>
    <p>Try changing your filters or check back later.</p>
    <button 
      pButton 
      type="button" 
      label="Reset Filters" 
      icon="pi pi-filter-slash"
      class="p-button-outlined"
      (click)="onFilterChange('all')">
    </button>
  </div>

  <!-- User Grid -->
  <div *ngIf="!isLoading && users.length > 0" class="users-grid">
    <app-user-card 
      *ngFor="let user of users; trackBy: trackByUserId"
      [user]="user"
      (chatClick)="onChatClick($event)"
      (cardClick)="onCardClick($event)">
    </app-user-card>
  </div>
</div>

<!-- Toast Messages -->
<p-toast></p-toast>


